if(Ti.version<1.8){alert('Sorry - this application template requires Titanium Mobile SDK 1.8 or later');}
Ti.include('ui/winmodule/fnc_logging.js');Ti.include('ui/winmodule/fnc_db.js');dbInitialize();(function(){var osname=Ti.Platform.osname,version=Ti.Platform.version,height=Ti.Platform.displayCaps.platformHeight,width=Ti.Platform.displayCaps.platformWidth;Ti.API.info('User:'+Ti.App.Properties.getString('cloud_useremail','000viewer.defaultui@fuihan.com'))
Ti.API.info('Pass:'+Ti.App.Properties.getString('cloud_password','000viewer.defaultui@fuihan.com'))
var isTablet=osname==='ipad'||(osname==='android'&&(width>899||height>899));var Cloud=require('ti.cloud');if(Ti.App.Properties.getBool('auto_login',false)){var _login=Ti.App.Properties.getString('cloud_useremail','viewer.defaultui@fuihan.com')
var _password=Ti.App.Properties.getString('cloud_userpassword','viewerInPub')}else{var _login='viewer.defaultui@fuihan.com'
var _password='viewerInPub'
Ti.App.Properties.removeProperty('cloud_userid')
Ti.App.Properties.removeProperty('cloud_useremail')
Ti.App.Properties.removeProperty('cloud_userpassword')
Ti.App.Properties.removeProperty('cloud_Logged')}
if(osname=='mobileweb'){var tempappid=Ti.Utils.base64decode(Ti.App.Properties.getString('viewerid','')).toString();_login='viewer.'+tempappid.toString().substr(9,200)}
Ti.API.info('User:'+_login)
Ti.API.info('Pass:'+_password)
Cloud.Users.login({login:_login,password:_password},function(e){if(e.success){var user=e.users[0];Ti.API.info('user_id:'+user.custom_fields['content_user_id'])
Cloud.Objects.query({classname:'windows',page:1,per_page:10,where:{user_id:user.custom_fields['content_user_id'],win_id:0,win_root_id:0}},function(e){if(e.success){if(Ti.Platform.osname=='mobileweb'){}
Ti.API.info('WinDows TYPE_TABBEDGROUP Count:'+e.windows.length)
Ti.API.info('WinDows TYPE_TABBEDGROUP id:'+e.windows[0].id)
var windows=e.windows[0]
if(windows.win_type=='TYPE_TABBEDGROUP'){Ti.API.info('Create Tabgroup')
var ApplicationTabGroup=require('ui/common/ApplicationTabGroup');Ti.API.info('Create Tabgroup')
new ApplicationTabGroup(isTablet).open();}else{Ti.API.info('Tyep:'+windows.win_type)}}else{alert('Error:\\n'+
((e.error&&e.message)||JSON.stringify(e)));}});}else{alert('Error:\\n'+
((e.error&&e.message)||JSON.stringify(e)));}});})();